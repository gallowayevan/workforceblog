var AutoComplete=function(){"use strict";function e(){}function t(e,t){for(var s in t)e[s]=t[s];return e}function s(e,t){e.appendChild(t)}function n(e,t,s){e.insertBefore(t,s)}function r(e){e.parentNode.removeChild(e)}function i(e){return document.createElement(e)}function o(e){return document.createTextNode(e)}function l(){return document.createComment("")}function a(e,t,s,n){e.addEventListener(t,s,n)}function u(e,t,s,n){e.removeEventListener(t,s,n)}function c(){return Object.create(null)}function d(e){e._lock=!0,h(e._beforecreate),h(e._oncreate),h(e._aftercreate),e._lock=!1}function h(e){for(;e&&e.length;)e.shift()()}var f={destroy:function(t){this.destroy=e,this.fire("destroy"),this.set=e,this._fragment.d(!1!==t),this._fragment=null,this._state={}},get:function(){return this._state},fire:function(e,t){var s=e in this._handlers&&this._handlers[e].slice();if(s)for(var n=0;n<s.length;n+=1){var r=s[n];if(!r.__calling)try{r.__calling=!0,r.call(this,t)}finally{r.__calling=!1}}},on:function(e,t){var s=this._handlers[e]||(this._handlers[e]=[]);return s.push(t),{cancel:function(){var e=s.indexOf(t);~e&&s.splice(e,1)}}},set:function(e){this._set(t({},e)),this.root._lock||d(this.root)},_recompute:e,_set:function(e){var s=this._state,n={},r=!1;for(var i in e=t(this._staged,e),this._staged={},e)this._differs(e[i],s[i])&&(n[i]=r=!0);r&&(this._state=t(t({},s),e),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:s}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:s})))},_stage:function(e){t(this._staged,e)},_mount:function(e,t){this._fragment[this._fragment.i?"i":"m"](e,t||null)},_differs:function(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}};var p={async onChange(e){const{isAsync:t,search:s,minChar:n}=this.get();this.fire("input",s),this.get().isAsync?this.set({isLoading:!0}):s.length>=Number(n)&&(this.filterResults(),this.set({isOpen:!0}))},filterResults(){const{items:e,search:t,fromStart:s,maxItems:n}=this.get(),r=e.filter(e=>("string"!=typeof e&&(e=e.key||""),s?e.toUpperCase().startsWith(t.toUpperCase()):e.toUpperCase().includes(t.toUpperCase()))).map(e=>{const s="string"!=typeof e?e.key:e;return{key:s,value:e.value||e,label:""===t.trim()?s:s.replace(RegExp((e=>e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&"))(t.trim()),"i"),"<span>$&</span>")}});this.set({results:r});const i=r.length>n?n:r.length;this.refs.list.style.height=`${3*i}rem`},onKeyDown(e){let{arrowCounter:t,results:s}=this.get();40===e.keyCode&&t<s.length?this.set({arrowCounter:t+1}):38===e.keyCode&&t>0?this.set({arrowCounter:t-1}):13===e.keyCode?(e.preventDefault(),-1===t&&(t=0),this.close(t)):27===e.keyCode&&(e.preventDefault(),this.close())},close(e=-1){if(this.set({isOpen:!1,arrowCounter:-1}),this.refs.input.blur(),e>-1){const{results:t}=this.get(),{key:s,value:n}=t[e];this.set({value:n,search:s}),this.fire("change",n)}else this.get().value||this.set({search:""})}};function m({changed:e,current:t}){this.get().isAsync&&e.items&&t.items.length&&(this.set({items:t.items,isLoading:!1,isOpen:!0}),this.filterResults())}function v(e){const{component:t,ctx:s}=this._svelte;t.close(s.i)}function g(e,t,s){const n=Object.create(e);return n.result=t[s],n.i=s,n}function _(e,t){var s,o,l=t.result.label;return{c(){(s=i("li"))._svelte={component:e,ctx:t},a(s,"click",v),s.className=o="autocomplete-result"+(t.i===t.arrowCounter?" is-active":"")+" svelte-1l0d8tq"},m(e,t){n(e,s,t),s.innerHTML=l},p(e,n){t=n,e.results&&l!==(l=t.result.label)&&(s.innerHTML=l),s._svelte.ctx=t,e.arrowCounter&&o!==(o="autocomplete-result"+(t.i===t.arrowCounter?" is-active":"")+" svelte-1l0d8tq")&&(s.className=o)},d(e){e&&r(s),u(s,"click",v)}}}function b(e,t){var s,o,a,u=e._slotted.default;return{c(){u||((a=i("p")).textContent="Loading data..."),u||(a.className="fallback svelte-1l0d8tq")},m(e,t){u?(n(e,s||(s=l()),t),n(e,u,t),n(e,o||(o=l()),t)):n(e,a,t)},d(e){u?(!function(e,t,s){for(;e.nextSibling&&e.nextSibling!==t;)s.appendChild(e.parentNode.removeChild(e.nextSibling))}(s,o,u),r(s),r(o)):e&&r(a)}}}function y(e){var l;!function(e,t){e._handlers=c(),e._slots=c(),e._bind=t._bind,e._staged={},e.options=t,e.root=t.root||e,e.store=t.store||e.root.store,t.root||(e._beforecreate=[],e._oncreate=[],e._aftercreate=[])}(this,e),this.refs={},this._state=t({name:"",value:"",placeholder:"",required:!1,disabled:!1,items:[],isOpen:!1,results:[],search:"",isLoading:!1,arrowCounter:0,class:"",isAsync:!1,minChar:2,maxItems:10,fromStart:!0},e.data),this._intro=!0,this._handlers.update=[m],this._slotted=e.slots||{},document.getElementById("svelte-1l0d8tq-style")||((l=i("style")).id="svelte-1l0d8tq-style",l.textContent=".svelte-1l0d8tq{box-sizing:border-box}input.svelte-1l0d8tq{padding:0.25rem 0.5rem;margin:0}.autocomplete.svelte-1l0d8tq{position:relative}.hide-results.svelte-1l0d8tq{display:none}.autocomplete-results.svelte-1l0d8tq{padding:0;margin:0;border:1px solid #dbdbdb;height:6rem;overflow:auto;width:400px;background-color:white;box-shadow:2px 2px 24px rgba(0, 0, 0, 0.1);position:absolute;z-index:100}.autocomplete-result.svelte-1l0d8tq{color:#7a7a7a;list-style:none;text-align:left;padding:0.25rem 0.5rem;cursor:pointer;margin-bottom:0}.autocomplete-result.svelte-1l0d8tq>span{background-color:none;color:#242424;font-weight:bold}.autocomplete-result.is-active.svelte-1l0d8tq,.autocomplete-result.svelte-1l0d8tq:hover{background-color:#dbdbdb}",s(document.head,l)),this._fragment=function(e,t){var l,c,d,h,f,p,m,v=!1;function y(t){e.close()}function C(){v=!0,e.set({search:c.value}),v=!1}function q(t){e.onChange(t)}function x(t){e.fire("focus",t)}function k(t){e.fire("blur",t)}function w(t){e.onKeyDown(t)}window.addEventListener("click",y);for(var L=t.results,N=[],O=0;O<L.length;O+=1)N[O]=_(e,g(t,L,O));var A=t.isLoading&&b(e);function E(e){e.stopPropagation()}return{c(){l=i("div"),c=i("input"),h=o("\r\n  "),f=i("ul");for(var e=0;e<N.length;e+=1)N[e].c();var s,n,r;m=o("\r\n"),A&&A.c(),a(c,"input",C),a(c,"input",q),a(c,"focus",x),a(c,"blur",k),a(c,"keydown",w),s=c,n="type",null==(r="text")?s.removeAttribute(n):s.setAttribute(n,r),c.className=t.class+" svelte-1l0d8tq",c.name=t.name,c.placeholder=t.placeholder,c.required=t.required,c.disabled=t.disabled,c.value=d=t.value||"",c.autocomplete=t.name,f.className=p="autocomplete-results"+(t.isOpen?"":" hide-results")+" svelte-1l0d8tq",a(l,"click",E),l.className="autocomplete svelte-1l0d8tq"},m(r,i){n(r,l,i),s(l,c),e.refs.input=c,c.value=t.search,s(l,h),s(l,f);for(var o=0;o<N.length;o+=1)N[o].m(f,null);e.refs.list=f,s(l,m),A&&A.m(l,null)},p(t,s){if(!v&&t.search&&(c.value=s.search),t.class&&(c.className=s.class+" svelte-1l0d8tq"),t.name&&(c.name=s.name),t.placeholder&&(c.placeholder=s.placeholder),t.required&&(c.required=s.required),t.disabled&&(c.disabled=s.disabled),t.value&&d!==(d=s.value||"")&&(c.value=d),t.name&&(c.autocomplete=s.name),t.arrowCounter||t.results){L=s.results;for(var n=0;n<L.length;n+=1){const r=g(s,L,n);N[n]?N[n].p(t,r):(N[n]=_(e,r),N[n].c(),N[n].m(f,null))}for(;n<N.length;n+=1)N[n].d(1);N.length=L.length}t.isOpen&&p!==(p="autocomplete-results"+(s.isOpen?"":" hide-results")+" svelte-1l0d8tq")&&(f.className=p),s.isLoading?A||((A=b(e)).c(),A.m(l,null)):A&&(A.d(1),A=null)},d(t){window.removeEventListener("click",y),t&&r(l),u(c,"input",C),u(c,"input",q),u(c,"focus",x),u(c,"blur",k),u(c,"keydown",w),e.refs.input===c&&(e.refs.input=null),function(e,t){for(var s=0;s<e.length;s+=1)e[s]&&e[s].d(t)}(N,t),e.refs.list===f&&(e.refs.list=null),A&&A.d(),u(l,"click",E)}}}(this,this._state),this.root._oncreate.push(()=>{this.fire("update",{changed:function(e,t){for(var s in t)e[s]=1;return e}({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),d(this))}return t(y.prototype,f),t(y.prototype,p),y}();